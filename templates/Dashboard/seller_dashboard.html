{% include  'base.html' %}
{% load static %}
{% block contentarea%}
<title>Letworkbedone - Seller Dashboard</title>
<link rel="stylesheet" href="{% static 'assets/css/frontend/seller_dashboard.css' %}" type="text/css" />
<div class="all_page page-flex__content pt0 m0">
    <div id="event_list" class="event-list js-event-list"></div>
    <div id="fox_notification_block"></div>
    <div class="row justify-content-center mt-5 mb-5" id="profile_view">
        <div class="col-md-12 mx-0">

            <div class="row">
                <div class="col-lg-4">
                    <div class="seller-performance-wrapper dashboard-box">
                        <div class="inner">
                           <div class="profile-progresses-wrapper">
                              <div class="profile-details-wrapper">
                                 <div class="img-wrapper">
                                    <div class="profile-img-wrapper">
                                       <div class="user-profile-image"><label class="profile-pict" for="profile_image_0911931740123" style="width: 60px; height: 60px; font-size: 1.2em;"><img src="{{request.user.avatar}}" class="profile-pict-img" alt="swap_soln_90"></label></div>
                                    </div>
                                 </div>
                                 <div class="user-details-text-wrapper">
                                    <div class="user-details">
                                       <a href="/user/profile/{{request.user.username}}" target="blank" class="username-link text-display-6">{{request.user.username|title}}</a>
                                       <div class="ratings-details flex flex-items-center help hint--top" data-hint="Maintain a rating of 4.7 or more, over the course of 60 days"></div>
                                    </div>
                                 </div>
                              </div>
                              <ul class="progresses-wrapper">
                             
                                 <li class="kpi-bar-ir-wrapper">
                                    <div class="e4rLWCQ _5tFuFhP _1DtaAoI kpi-bar-tooltip specific-z-index">
                                       <span class="FPMjOVo kpi-bar-tooltip-content">
                                          <a rel="noreferrer" class="_1DtaAoI kpi-bar-tooltip specific-z-index" delay="120" content="[object Object]" position="top" boxclassname="LIc0-hX" boxcontentclassname="l9wFBjm" contentclassname="kpi-bar-tooltip-content">
                                             <h6 class="text-body-1">Inbox response time</h6>
                                             <div class="progress-container">
                                                <div class="grade green">{{resp_time}} Hour</div>
                                             </div>
                                          </a>
                                       </span>
                                    </div>
                                 </li>
                                 {% comment %} <li class="kpi-bar-ir-wrapper">
                                    <div class="e4rLWCQ _5tFuFhP _1DtaAoI kpi-bar-tooltip specific-z-index">
                                       <span class="FPMjOVo kpi-bar-tooltip-content">
                                          <a rel="noreferrer" class="_1DtaAoI kpi-bar-tooltip specific-z-index" delay="120" content="[object Object]" position="top" boxclassname="LIc0-hX" boxcontentclassname="l9wFBjm" contentclassname="kpi-bar-tooltip-content">
                                             <h6 class="text-body-1">Order response rate</h6>
                                             <div class="progress-container">
                                                <div class="progress-bar-wrapper ignored">
                                                   <div class="T2t2hZx">
                                                      <div class="+8ZeAtI"><span class="EwNCrd9" style="width: {{active_per}}%;"></span></div>
                                                   </div>
                                                </div>
                                                <div class="percent-text font-accent"  onmouseover="helptextOnhover(this)" onmouseout="helptextOnhover(this)">{{active_per}}%</div>
                                             </div>
                                          </a>
                                       </span>
                                       <div class="help_div"> 
                                            <div class="helptext_desc" style="left: 19px; top: 28px; display: none;">
                                                This is how often you answered order messages and revision requests within 24h in the last 60 days.
                                            </div> 
                                            
                                        </div>
                                    </div>
                                 </li> {% endcomment %}
                                 <li class="kpi-bar-ir-wrapper">
                                    <div class="e4rLWCQ _5tFuFhP _1DtaAoI kpi-bar-tooltip specific-z-index">
                                       <span class="FPMjOVo kpi-bar-tooltip-content">
                                          <a  rel="noreferrer" class="_1DtaAoI kpi-bar-tooltip specific-z-index" delay="120" content="[object Object]" position="top" boxclassname="LIc0-hX" boxcontentclassname="l9wFBjm" contentclassname="kpi-bar-tooltip-content">
                                             <h6 class="text-body-1">Average Delivery Time</h6>
                                             <div class="progress-container">
                                                <div class="grade green">{{delivered_per}}</div>
                                             </div>
                                          </a>
                                       </span>
                                    </div>
                                 </li>
                                 <li class="kpi-bar-ir-wrapper">
                                    <div class="e4rLWCQ _5tFuFhP _1DtaAoI kpi-bar-tooltip specific-z-index">
                                       <span class="FPMjOVo kpi-bar-tooltip-content">
                                          <a rel="noreferrer" class="_1DtaAoI kpi-bar-tooltip specific-z-index" delay="120" content="[object Object]" position="top" boxclassname="LIc0-hX" boxcontentclassname="l9wFBjm" contentclassname="kpi-bar-tooltip-content">
                                             <h6 class="text-body-1">Order completion</h6>
                                             <div class="progress-container">
                                                <div class="progress-bar-wrapper warning">
                                                   <div class="T2t2hZx">
                                                      <div class="+8ZeAtI"><span class="EwNCrd9" style="width: {{completed_per}}%;"></span></div>
                                                   </div>
                                                </div>
                                                <div class="percent-text font-accent"  onmouseover="helptextOnhover(this)" onmouseout="helptextOnhover(this)">{{completed_per}}%</div>
                                             </div>
                                          </a>
                                       </span>
                                       <div class="help_div"> 
                                            <div class="helptext_desc" style="left: 19px; top: 28px; display: none;">
                                                Complete at least 90% of your orders for 60 days to maintain your level or qualify for the next one.
                                            </div> 
                                            
                                        </div>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                           <ol class="earnings-wrapper">
                              <li class="kpi-text-ir-wrapper">
                                 <div class="e4rLWCQ _5tFuFhP _1DtaAoI kpi-text-tooltip specific-z-index">
                                    <span class="FPMjOVo kpi-text-tooltip-content">
                                       <a class="_1DtaAoI kpi-text-tooltip specific-z-index" delay="120" content="[object Object]" position="top" boxclassname="LIc0-hX" boxcontentclassname="l9wFBjm" contentclassname="kpi-text-tooltip-content">
                                          <div class="kpi-data-inner">
                                             <h6>Earned in {% now "F" %}</h6>
                                             <span class="grade ">$ {{this_earning}}</span>
                                          </div>
                                       </a>
                                    </span>
                                    <div class="help_div"> 
                                        <div class="helptext_desc" style="left: 19px; top: 28px; display: none;">
                                            Total earnings and pending clearance in September.
                                        </div> 
                                    </div>
                                 </div>
                              </li>
                           </ol>
                        </div>
                      </div>
                </div>
                <div class="col-lg-8">
                    <div class="active-orders-wrapper">
                        <div class="filter-wrapper cf">
                            <div class="title-wrapper">
                                <input type="hidden" value="{{Active_earning}}" id="active_earning">
                                <input type="hidden" value="{{active_orders|length}}" id="active_orders">
                                <input type="hidden" value="{{completed_orders|length}}" id="compl_orders">
                                <input type="hidden" value="{{cancelled_orders|length}}" id="cancelled_orders">
                                <input type="hidden" value="{{delivered_orders|length}}" id="delivered_orders">
                                <h3 class="font-accent order_text">Active orders<span> -  {{active_orders|length}}(${{Active_earning}})</span></h3>
                            </div> 
                            <div class="e4rLWCQ DQP4pgk tcJTQWy statuses-select _3imrn2i">
                                <select id="sort_options" onchange="sortoptionsOnchange(this);">
                                    <option value="active" selected>Active orders ({{active_orders|length}})</option>
                                    <option value="delivered">Delivered ({{delivered_orders|length}})</option>
                                    <option value="complete">Complete ({{completed_orders|length}})</option>
                                    <option value="cancelled">Canceled ({{cancelled_orders|length}})</option>
                               </select>
                            </div>
                        </div>

                        <div class="order-cards-wrapper" id= "active_orders_div"> 
                            <ul>
                                {% for ac_order in active_orders %}
                                <li class="order-card-wrapper">
                                   <div class="card-inner late">
                                      <div class="badges"></div>
                                      <div class="order-card">
                                        <ul class="order-data">
                                            <li class="user">
                                                <div class="gig-image-wrapper" style="background-image: url('{{ac_order.gig_image_url}}');"></div>
                                            </li>
                                            <li class="user">
                                               <figure class="profile-picture-wrapper">
                                                  <figcaption class="font-accent" style="background-image: url('{{ac_order.buyer_img}}'); color: transparent;"></figcaption>
                                               </figure>
                                               <a title="{{ac_order.buyer_username}}" class="font-accent buyer-username">{{ac_order.buyer_username | title}}</a>
                                            </li>
                                            <li class="price">
                                               <h6>Price</h6>
                                               <span>$ {{ac_order.order_price}}</span>
                                            </li>
                                            <li class="delivery-time">
                                               <h6>Delivery Time</h6>
                                               <span class="time-wrapper late">
                                                {% if ac_order.del_satus == "late" %}
                                                    <span class="lFICM06 icn-clock" aria-hidden="true" style="width: 13px; height: 13px; fill: rgb(247, 64, 64);">
                                                        <svg width="12" height="12" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z"></path>
                                                            <path d="M9 4H7v5h5V7H9V4z"></path>
                                                        </svg>
                                                    </span>
                                                {% else %}
                                                    <span class="lFICM06 icn-clock" aria-hidden="true" style="width: 13px; height: 13px; fill: rgb(0, 102, 140);">
                                                        <svg width="12" height="12" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z"></path>
                                                            <path d="M9 4H7v5h5V7H9V4z"></path>
                                                        </svg>
                                                    </span>
                                                {% endif %}
                                                  <span>{{ac_order.delivery_time}}</span>
                                               </span>
                                            </li>
                                            <li class="status">
                                               <h6>Status</h6>
                                                {% if ac_order.del_satus == "late" %}
                                                    <span class="status late" style="background: rgb(250, 31, 41);">{{ac_order.del_satus|upper }}</span>
                                                {% else %}
                                                    <span class="status late" style="background: rgb(0, 102, 140);">{{ac_order.del_satus|upper }}</span>
                                                {% endif %}
                                            </li>
                                            <li class="cta-wrapper"><a class="font-accent" href="/user/{{request.user.username}}/manage_orders/{{ac_order.order_id}}/activities" target="_blank">View</a></li>
                                         </ul>
                                    </div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                         </div>
                         <div class="order-cards-wrapper" id= "delivered_orders_div"> 
                            <ul>
                                {% for ac_order in delivered_orders %}
                                <li class="order-card-wrapper">
                                   <div class="card-inner late">
                                      <div class="badges"></div>
                                      <div class="order-card">
                                        <ul class="order-data">
                                            <li class="user">
                                                <div class="gig-image-wrapper" style="background-image: url('{{ac_order.gig_image_url}}');"></div>
                                            </li>
                                            <li class="user">
                                               <figure class="profile-picture-wrapper">
                                                  <figcaption class="font-accent" style="background-image: url('{{ac_order.buyer_img}}'); color: transparent;"></figcaption>
                                               </figure>
                                               <a title="{{ac_order.buyer_username}}" class="font-accent buyer-username">{{ac_order.buyer_username | title}}</a>
                                            </li>
                                            <li class="price">
                                               <h6>Price</h6>
                                               <span>$ {{ac_order.order_price}}</span>
                                            </li>
                                            <li class="status">
                                               <h6>Status</h6>
                                                <span class="status late" style="background: rgb(0, 204, 102);">{{ac_order.del_satus|upper }}</span>
                                            </li>
                                            <li class="cta-wrapper"><a class="font-accent" href="/user/{{request.user.username}}/manage_orders/{{ac_order.order_id}}/activities" target="_blank">View</a></li>
                                         </ul>
                                    </div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                         </div>

                         <div class="order-cards-wrapper" id= "completed_orders_div"> 
                            <ul>
                                {% for ac_order in completed_orders %}
                                <li class="order-card-wrapper">
                                   <div class="card-inner late">
                                      <div class="badges"></div>
                                      <div class="order-card">
                                        <ul class="order-data">
                                            <li class="user">
                                                <div class="gig-image-wrapper" style="background-image: url('{{ac_order.gig_image_url}}');"></div>
                                            </li>
                                            <li class="user">
                                               <figure class="profile-picture-wrapper">
                                                  <figcaption class="font-accent" style="background-image: url('{{ac_order.buyer_img}}'); color: transparent;"></figcaption>
                                               </figure>
                                               <a title="{{ac_order.buyer_username}}" class="font-accent buyer-username">{{ac_order.buyer_username | title}}</a>
                                            </li>
                                            <li class="price">
                                               <h6>Price</h6>
                                               <span>$ {{ac_order.order_price}}</span>
                                            </li>
                                            <li class="status">
                                               <h6>Status</h6>
                                                <span class="status late" style="background: rgb(46, 93, 197);">{{ac_order.del_satus|upper }}</span>
                                            </li>
                                            <li class="cta-wrapper"><a class="font-accent" href="/user/{{request.user.username}}/manage_orders/{{ac_order.order_id}}/activities" target="_blank">View</a></li>
                                         </ul>
                                    </div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                         </div>


                         <div class="order-cards-wrapper" id= "cancelled_orders_div"> 
                            <ul>
                                {% for ac_order in cancelled_orders %}
                                <li class="order-card-wrapper">
                                   <div class="card-inner late">
                                      <div class="badges"></div>
                                      <div class="order-card">
                                        <ul class="order-data">
                                            <li class="user">
                                                <div class="gig-image-wrapper" style="background-image: url('{{ac_order.gig_image_url}}');"></div>
                                            </li>
                                            <li class="user">
                                               <figure class="profile-picture-wrapper">
                                                  <figcaption class="font-accent" style="background-image: url('{{ac_order.buyer_img}}'); color: transparent;"></figcaption>
                                               </figure>
                                               <a title="{{ac_order.buyer_username}}" class="font-accent buyer-username">{{ac_order.buyer_username | title}}</a>
                                            </li>
                                            <li class="price">
                                               <h6>Price</h6>
                                               <span>$ {{ac_order.order_price}}</span>
                                            </li>
                                            <li class="status">
                                               <h6>Status</h6>
                                                <span class="status late" style="background: rgb(255, 51, 51);">{{ac_order.del_satus|upper }}</span>
                                            </li>
                                            <li class="cta-wrapper"><a class="font-accent" href="/user/{{request.user.username}}/manage_orders/{{ac_order.order_id}}/activities" target="_blank">View</a></li>
                                         </ul>
                                    </div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                         </div>
                    </div>
                </div> 
            </div> 
        </div> 
    </div> 
</div> 

{% include  'Dashboard/base_seller.html' %}
<style>
   .order-card-wrapper .order-card .buyer-username
   {
      text-decoration: none;
      cursor: default;
   }
</style>
<script>
    $(document).ready(function(){
        $(".order-cards-wrapper").hide();
        $("#active_orders_div").show();
    });
    function sortoptionsOnchange(ev)
    {
        $(".order-cards-wrapper").hide();
        sel_val  = $("#sort_options").val();
        if(sel_val == "active")
        {
            $(".order_text").html('Active orders<span> -  {{active_orders|length}}(${{Active_earning}})</span>');
            $("#active_orders_div").show();
        }
        else if(sel_val == "delivered")
        {
            $(".order_text").html('Delivered orders<span> -  {{delivered_orders|length}}</span>');
            $("#delivered_orders_div").show();
        }
        else if(sel_val == "complete")
        {
            $(".order_text").html('Completed orders<span> -  {{completed_orders|length}}</span>');
            $("#completed_orders_div").show();
        }
        else if(sel_val == "cancelled")
        {
            $(".order_text").html('cancelled orders<span> -  {{cancelled_orders|length}}</span>');
            $("#cancelled_orders_div").show();
        }
    }
    function helptextOnhover(ev)
    {
        parentdiv= $(ev).parent().parent().parent().parent();
        $(parentdiv).find('.helptext_desc').css({}).toggle();
    }
</script>
{% endblock %}
